var l=Object.defineProperty;var f=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var h=Object.prototype.hasOwnProperty;var w=(e,t)=>()=>(e&&(t=e(e=0)),t);var y=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var p=(e,t,o,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of g(t))!h.call(e,i)&&i!==o&&l(e,i,{get:()=>t[i],enumerable:!(n=f(t,i))||n.enumerable});return e},u=(e,t,o)=>(p(e,t,"default"),o&&p(o,t,"default"));var b=e=>p(l({},"__esModule",{value:!0}),e);var a={};import*as k from"https://registry.koishi.chat/modules/koishi/index.js";var d=w(()=>{u(a,k)});var _=y(r=>{Object.defineProperty(r,"__esModule",{value:!0});r.apply=r.Config=r.name=void 0;var m=(d(),b(a)),v="zh-CN",j="metric",s=["astro","civil","civillight","meteo","two"];r.name="weather";r.Config=m.Schema.object({});function C(e){e.command("weather <longitude> <latitude>","查询天气").option("product",`-p <product:string>  晴天钟产品选择，可为 ${s.join(", ")}`,{fallback:"civil"}).action(async({options:t},o,n)=>{if(!o||!n)return"请输入经纬度。";let{product:i}=t;if(!s.includes(t.product))return`不支持该产品，产品选择应为 ${s.join(", ")} 之一。`;try{let c=await e.http.get(`http://www.7timer.info/bin/${i}.php`,{params:{lon:o,lat:n,lang:v,unit:j},responseType:"arraybuffer"});return m.segment.image(c)}catch(c){return e.logger("tools").warn(c),"请求失败。"}})}r.apply=C});export default _();
