import{ref as D,computed as R,reactive as vt,defineComponent as gt,openBlock as T,createElementBlock as b,createElementVNode as I,withModifiers as Y,normalizeClass as Q,unref as A,watch as Mt,onMounted as kt,resolveComponent as Ct,createBlock as st,withCtx as at,Fragment as Z,renderList as tt,createVNode as Nt,Transition as At,withDirectives as $t,normalizeStyle as zt,toDisplayString as Lt,vShow as Et}from"../vue.js";import{store as nt,icons as St}from"../client.js";import{useEventListener as j,useElementSize as Tt}from"../vueuse.js";function W(t){return t.type.startsWith("touch")?[...t.targetTouches,...t.changedTouches][0]:t}function It(){const t=D(""),e=D(false),n=D(true),i=D(0),r=D(0),s=R(()=>!i.value||!r.value?{display:"none"}:{left:i.value+"px",top:r.value+"px"});function u(v,g){const d=W(g);t.value=v,e.value=true,n.value=false,i.value=d.clientX,r.value=d.clientY}function o(v=0,g=false){n.value=true,setTimeout(()=>{n.value&&(e.value=false,g&&(i.value=null,r.value=null))},v)}j("mousemove",l),j("touchmove",l);function l(v){if(n.value)return;const g=W(v);r.value=g.clientY,i.value=g.clientX}return vt({style:s,content:t,active:e,inactive:n,activate:u,deactivate:o})}function Dt(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return yt(this.cover(e,n),e,n,t)}function yt(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var r,s=t._root,u={data:i},o=t._x0,l=t._y0,v=t._x1,g=t._y1,d,_,c,m,f,a,h,y;if(!s)return t._root=u,t;for(;s.length;)if((f=e>=(d=(o+v)/2))?o=d:v=d,(a=n>=(_=(l+g)/2))?l=_:g=_,r=s,!(s=s[h=a<<1|f]))return r[h]=u,t;if(c=+t._x.call(null,s.data),m=+t._y.call(null,s.data),e===c&&n===m)return u.next=s,r?r[h]=u:t._root=u,t;do r=r?r[h]=new Array(4):t._root=new Array(4),(f=e>=(d=(o+v)/2))?o=d:v=d,(a=n>=(_=(l+g)/2))?l=_:g=_;while((h=a<<1|f)===(y=(m>=_)<<1|c>=d));return r[y]=s,r[h]=u,t}function bt(t){var e,n,i=t.length,r,s,u=new Array(i),o=new Array(i),l=1/0,v=1/0,g=-1/0,d=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(s=+this._y.call(null,e))||(u[n]=r,o[n]=s,r<l&&(l=r),r>g&&(g=r),s<v&&(v=s),s>d&&(d=s));if(l>g||v>d)return this;for(this.cover(l,v).cover(g,d),n=0;n<i;++n)yt(this,u[n],o[n],t[n]);return this}function Ot(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,r=this._x1,s=this._y1;if(isNaN(n))r=(n=Math.floor(t))+1,s=(i=Math.floor(e))+1;else{for(var u=r-n||1,o=this._root,l,v;n>t||t>=r||i>e||e>=s;)switch(v=(e<i)<<1|t<n,l=new Array(4),l[v]=o,o=l,u*=2,v){case 0:r=n+u,s=i+u;break;case 1:n=r-u,s=i+u;break;case 2:r=n+u,i=s-u;break;case 3:n=r-u,i=s-u;break}this._root&&this._root.length&&(this._root=o)}return this._x0=n,this._y0=i,this._x1=r,this._y1=s,this}function Xt(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function Yt(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function $(t,e,n,i,r){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=r}function jt(t,e,n){var i,r=this._x0,s=this._y0,u,o,l,v,g=this._x1,d=this._y1,_=[],c=this._root,m,f;for(c&&_.push(new $(c,r,s,g,d)),n==null?n=1/0:(r=t-n,s=e-n,g=t+n,d=e+n,n*=n);m=_.pop();)if(!(!(c=m.node)||(u=m.x0)>g||(o=m.y0)>d||(l=m.x1)<r||(v=m.y1)<s))if(c.length){var a=(u+l)/2,h=(o+v)/2;_.push(new $(c[3],a,h,l,v),new $(c[2],u,h,a,v),new $(c[1],a,o,l,h),new $(c[0],u,o,a,h)),(f=(e>=h)<<1|t>=a)&&(m=_[_.length-1],_[_.length-1]=_[_.length-1-f],_[_.length-1-f]=m)}else{var y=t-+this._x.call(null,c.data),k=e-+this._y.call(null,c.data),x=y*y+k*k;if(x<n){var N=Math.sqrt(n=x);r=t-N,s=e-N,g=t+N,d=e+N,i=c.data}}return i}function Bt(t){if(isNaN(g=+this._x.call(null,t))||isNaN(d=+this._y.call(null,t)))return this;var e,n=this._root,i,r,s,u=this._x0,o=this._y0,l=this._x1,v=this._y1,g,d,_,c,m,f,a,h;if(!n)return this;if(n.length)for(;;){if((m=g>=(_=(u+l)/2))?u=_:l=_,(f=d>=(c=(o+v)/2))?o=c:v=c,e=n,!(n=n[a=f<<1|m]))return this;if(!n.length)break;(e[a+1&3]||e[a+2&3]||e[a+3&3])&&(i=e,h=a)}for(;n.data!==t;)if(r=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,r?(s?r.next=s:delete r.next,this):e?(s?e[a]=s:delete e[a],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(i?i[h]=n:this._root=n),this):(this._root=s,this)}function Pt(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function Ft(){return this._root}function Vt(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function qt(t){var e=[],n,i=this._root,r,s,u,o,l;for(i&&e.push(new $(i,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(i=n.node,s=n.x0,u=n.y0,o=n.x1,l=n.y1)&&i.length){var v=(s+o)/2,g=(u+l)/2;(r=i[3])&&e.push(new $(r,v,g,o,l)),(r=i[2])&&e.push(new $(r,s,g,v,l)),(r=i[1])&&e.push(new $(r,v,u,o,g)),(r=i[0])&&e.push(new $(r,s,u,v,g))}return this}function Ht(t){var e=[],n=[],i;for(this._root&&e.push(new $(this._root,this._x0,this._y0,this._x1,this._y1));i=e.pop();){var r=i.node;if(r.length){var s,u=i.x0,o=i.y0,l=i.x1,v=i.y1,g=(u+l)/2,d=(o+v)/2;(s=r[0])&&e.push(new $(s,u,o,g,d)),(s=r[1])&&e.push(new $(s,g,o,l,d)),(s=r[2])&&e.push(new $(s,u,d,g,v)),(s=r[3])&&e.push(new $(s,g,d,l,v))}n.push(i)}for(;i=n.pop();)t(i.node,i.x0,i.y0,i.x1,i.y1);return this}function Qt(t){return t[0]}function Gt(t){return arguments.length?(this._x=t,this):this._x}function Rt(t){return t[1]}function Wt(t){return arguments.length?(this._y=t,this):this._y}function xt(t,e,n){var i=new rt(e??Qt,n??Rt,NaN,NaN,NaN,NaN);return t==null?i:i.addAll(t)}function rt(t,e,n,i,r,s){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=r,this._y1=s,this._root=void 0}function ut(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var z=xt.prototype=rt.prototype;z.copy=function(){var t=new rt(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,i;if(!e)return t;if(!e.length)return t._root=ut(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var r=0;r<4;++r)(i=e.source[r])&&(i.length?n.push({source:i,target:e.target[r]=new Array(4)}):e.target[r]=ut(i));return t};z.add=Dt;z.addAll=bt;z.cover=Ot;z.data=Xt;z.extent=Yt;z.find=jt;z.remove=Bt;z.removeAll=Pt;z.root=Ft;z.size=Vt;z.visit=qt;z.visitAfter=Ht;z.x=Gt;z.y=Wt;function E(t){return function(){return t}}function B(t){return(t()-.5)*1e-6}function Jt(t){return t.index}function lt(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function Kt(t){var e=Jt,n=d,i,r=E(30),s,u,o,l,v,g=1;t==null&&(t=[]);function d(a){return 1/Math.min(o[a.source.index],o[a.target.index])}function _(a){for(var h=0,y=t.length;h<g;++h)for(var k=0,x,N,p,w,C,M,L;k<y;++k)x=t[k],N=x.source,p=x.target,w=p.x+p.vx-N.x-N.vx||B(v),C=p.y+p.vy-N.y-N.vy||B(v),M=Math.sqrt(w*w+C*C),M=(M-s[k])/M*a*i[k],w*=M,C*=M,p.vx-=w*(L=l[k]),p.vy-=C*L,N.vx+=w*(L=1-L),N.vy+=C*L}function c(){if(u){var a,h=u.length,y=t.length,k=new Map(u.map((N,p)=>[e(N,p,u),N])),x;for(a=0,o=new Array(h);a<y;++a)x=t[a],x.index=a,typeof x.source!="object"&&(x.source=lt(k,x.source)),typeof x.target!="object"&&(x.target=lt(k,x.target)),o[x.source.index]=(o[x.source.index]||0)+1,o[x.target.index]=(o[x.target.index]||0)+1;for(a=0,l=new Array(y);a<y;++a)x=t[a],l[a]=o[x.source.index]/(o[x.source.index]+o[x.target.index]);i=new Array(y),m(),s=new Array(y),f()}}function m(){if(u)for(var a=0,h=t.length;a<h;++a)i[a]=+n(t[a],a,t)}function f(){if(u)for(var a=0,h=t.length;a<h;++a)s[a]=+r(t[a],a,t)}return _.initialize=function(a,h){u=a,v=h,c()},_.links=function(a){return arguments.length?(t=a,c(),_):t},_.id=function(a){return arguments.length?(e=a,_):e},_.iterations=function(a){return arguments.length?(g=+a,_):g},_.strength=function(a){return arguments.length?(n=typeof a=="function"?a:E(+a),m(),_):n},_.distance=function(a){return arguments.length?(r=typeof a=="function"?a:E(+a),f(),_):r},_}var Ut={value:()=>{}};function pt(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new G(n)}function G(t){this._=t}function Zt(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}G.prototype=pt.prototype={constructor:G,on:function(t,e){var n=this._,i=Zt(t+"",n),r,s=-1,u=i.length;if(arguments.length<2){for(;++s<u;)if((r=(t=i[s]).type)&&(r=tn(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<u;)if(r=(t=i[s]).type)n[r]=ft(n[r],t.name,e);else if(e==null)for(r in n)n[r]=ft(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new G(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,s;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],i=0,r=s.length;i<r;++i)s[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,s=i.length;r<s;++r)i[r].value.apply(e,n)}};function tn(t,e){for(var n=0,i=t.length,r;n<i;++n)if((r=t[n]).name===e)return r.value}function ft(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=Ut,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var P=0,V=0,F=0,wt=1e3,J,q,K=0,O=0,U=0,H=typeof performance=="object"&&performance.now?performance:Date,_t=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function dt(){return O||(_t(nn),O=H.now()+U)}function nn(){O=0}function et(){this._call=this._time=this._next=null}et.prototype=mt.prototype={constructor:et,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?dt():+n)+(e==null?0:+e),!this._next&&q!==this&&(q?q._next=this:J=this,q=this),this._call=t,this._time=n,it()},stop:function(){this._call&&(this._call=null,this._time=1/0,it())}};function mt(t,e,n){var i=new et;return i.restart(t,e,n),i}function en(){dt(),++P;for(var t=J,e;t;)(e=O-t._time)>=0&&t._call.call(void 0,e),t=t._next;--P}function ct(){O=(K=H.now())+U,P=V=0;try{en()}finally{P=0,on(),O=0}}function rn(){var t=H.now(),e=t-K;e>wt&&(U-=e,K=t)}function on(){for(var t,e=J,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:J=n);q=t,it(i)}function it(t){if(!P){V&&(V=clearTimeout(V));var e=t-O;e>24?(t<1/0&&(V=setTimeout(ct,t-H.now()-U)),F&&(F=clearInterval(F))):(F||(K=H.now(),F=setInterval(rn,wt)),P=1,_t(ct))}}const sn=1664525,an=1013904223,ht=4294967296;function un(){let t=1;return()=>(t=(sn*t+an)%ht)/ht}function ln(t){return t.x}function fn(t){return t.y}var cn=10,hn=Math.PI*(3-Math.sqrt(5));function vn(t){var e,n=1,i=.001,r=1-Math.pow(i,1/300),s=0,u=.6,o=new Map,l=mt(d),v=pt("tick","end"),g=un();t==null&&(t=[]);function d(){_(),v.call("tick",e),n<i&&(l.stop(),v.call("end",e))}function _(f){var a,h=t.length,y;f===void 0&&(f=1);for(var k=0;k<f;++k)for(n+=(s-n)*r,o.forEach(function(x){x(n)}),a=0;a<h;++a)y=t[a],y.fx==null?y.x+=y.vx*=u:(y.x=y.fx,y.vx=0),y.fy==null?y.y+=y.vy*=u:(y.y=y.fy,y.vy=0);return e}function c(){for(var f=0,a=t.length,h;f<a;++f){if(h=t[f],h.index=f,h.fx!=null&&(h.x=h.fx),h.fy!=null&&(h.y=h.fy),isNaN(h.x)||isNaN(h.y)){var y=cn*Math.sqrt(.5+f),k=f*hn;h.x=y*Math.cos(k),h.y=y*Math.sin(k)}(isNaN(h.vx)||isNaN(h.vy))&&(h.vx=h.vy=0)}}function m(f){return f.initialize&&f.initialize(t,g),f}return c(),e={tick:_,restart:function(){return l.restart(d),e},stop:function(){return l.stop(),e},nodes:function(f){return arguments.length?(t=f,c(),o.forEach(m),e):t},alpha:function(f){return arguments.length?(n=+f,e):n},alphaMin:function(f){return arguments.length?(i=+f,e):i},alphaDecay:function(f){return arguments.length?(r=+f,e):+r},alphaTarget:function(f){return arguments.length?(s=+f,e):s},velocityDecay:function(f){return arguments.length?(u=1-f,e):1-u},randomSource:function(f){return arguments.length?(g=f,o.forEach(m),e):g},force:function(f,a){return arguments.length>1?(a==null?o.delete(f):o.set(f,m(a)),e):o.get(f)},find:function(f,a,h){var y=0,k=t.length,x,N,p,w,C;for(h==null?h=1/0:h*=h,y=0;y<k;++y)w=t[y],x=f-w.x,N=a-w.y,p=x*x+N*N,p<h&&(C=w,h=p);return C},on:function(f,a){return arguments.length>1?(v.on(f,a),e):v.on(f)}}}function gn(){var t,e,n,i,r=E(-30),s,u=1,o=1/0,l=.81;function v(c){var m,f=t.length,a=xt(t,ln,fn).visitAfter(d);for(i=c,m=0;m<f;++m)e=t[m],a.visit(_)}function g(){if(t){var c,m=t.length,f;for(s=new Array(m),c=0;c<m;++c)f=t[c],s[f.index]=+r(f,c,t)}}function d(c){var m=0,f,a,h=0,y,k,x;if(c.length){for(y=k=x=0;x<4;++x)(f=c[x])&&(a=Math.abs(f.value))&&(m+=f.value,h+=a,y+=a*f.x,k+=a*f.y);c.x=y/h,c.y=k/h}else{f=c,f.x=f.data.x,f.y=f.data.y;do m+=s[f.data.index];while(f=f.next)}c.value=m}function _(c,m,f,a){if(!c.value)return true;var h=c.x-e.x,y=c.y-e.y,k=a-m,x=h*h+y*y;if(k*k/l<x)return x<o&&(h===0&&(h=B(n),x+=h*h),y===0&&(y=B(n),x+=y*y),x<u&&(x=Math.sqrt(u*x)),e.vx+=h*c.value*i/x,e.vy+=y*c.value*i/x),true;if(c.length||x>=o)return;(c.data!==e||c.next)&&(h===0&&(h=B(n),x+=h*h),y===0&&(y=B(n),x+=y*y),x<u&&(x=Math.sqrt(u*x)));do c.data!==e&&(k=s[c.data.index]*i/x,e.vx+=h*k,e.vy+=y*k);while(c=c.next)}return v.initialize=function(c,m){t=c,n=m,g()},v.strength=function(c){return arguments.length?(r=typeof c=="function"?c:E(+c),g(),v):r},v.distanceMin=function(c){return arguments.length?(u=c*c,v):Math.sqrt(u)},v.distanceMax=function(c){return arguments.length?(o=c*c,v):Math.sqrt(o)},v.theta=function(c){return arguments.length?(l=c*c,v):Math.sqrt(l)},v}function yn(t){var e=E(.1),n,i,r;typeof t!="function"&&(t=E(t==null?0:+t));function s(o){for(var l=0,v=n.length,g;l<v;++l)g=n[l],g.vx+=(r[l]-g.x)*i[l]*o}function u(){if(n){var o,l=n.length;for(i=new Array(l),r=new Array(l),o=0;o<l;++o)i[o]=isNaN(r[o]=+t(n[o],o,n))?0:+e(n[o],o,n)}}return s.initialize=function(o){n=o,u()},s.strength=function(o){return arguments.length?(e=typeof o=="function"?o:E(+o),u(),s):e},s.x=function(o){return arguments.length?(t=typeof o=="function"?o:E(+o),u(),s):t},s}function xn(t){var e=E(.1),n,i,r;typeof t!="function"&&(t=E(t==null?0:+t));function s(o){for(var l=0,v=n.length,g;l<v;++l)g=n[l],g.vy+=(r[l]-g.y)*i[l]*o}function u(){if(n){var o,l=n.length;for(i=new Array(l),r=new Array(l),o=0;o<l;++o)i[o]=isNaN(r[o]=+t(n[o],o,n))?0:+e(n[o],o,n)}}return s.initialize=function(o){n=o,u()},s.strength=function(o){return arguments.length?(e=typeof o=="function"?o:E(+o),u(),s):e},s.y=function(o){return arguments.length?(t=typeof o=="function"?o:E(+o),u(),s):t},s}var S;(t=>{t.arrowLength=10,t.arrowOffset=10,t.arrowAngle=Math.PI/6})(S||(S={}));const pn={class:"link"},wn=["x1","y1","x2","y2"],_n=["x1","y1","x2","y2"],dn=["x1","y1","x2","y2"],mn=["x1","y1","x2","y2"],Mn=gt({__name:"link",props:{link:null},emits:["mouseenter","mouseleave"],setup(t){const e=t,n=R(()=>{const{source:i,target:r}=e.link,s=r.x-i.x,u=r.y-i.y,o=Math.atan2(u,s),l=r.x-S.arrowOffset*Math.cos(o),v=r.y-S.arrowOffset*Math.sin(o),g=l-S.arrowLength*Math.cos(o-S.arrowAngle),d=v-S.arrowLength*Math.sin(o-S.arrowAngle),_=l-S.arrowLength*Math.cos(o+S.arrowAngle),c=v-S.arrowLength*Math.sin(o+S.arrowAngle);return{x0:l,y0:v,x1:g,y1:d,x2:_,y2:c}});return(i,r)=>(T(),b("g",pn,[I("line",{x1:t.link.source.x,y1:t.link.source.y,x2:t.link.target.x,y2:t.link.target.y,class:"shadow",onMouseenter:r[0]||(r[0]=Y(s=>i.$emit("mouseenter",t.link,s),["stop","prevent"])),onMouseleave:r[1]||(r[1]=Y(s=>i.$emit("mouseleave",t.link,s),["stop","prevent"]))},null,40,wn),I("line",{x1:t.link.source.x,y1:t.link.source.y,x2:t.link.target.x,y2:t.link.target.y,class:Q(t.link.type)},null,10,_n),I("line",{x1:A(n).x0,y1:A(n).y0,x2:A(n).x1,y2:A(n).y1},null,8,dn),I("line",{x1:A(n).x0,y1:A(n).y0,x2:A(n).x2,y2:A(n).y2},null,8,mn)]))}});const ot=(t,e)=>{const n=t.__vccOpts||t;for(const[i,r]of e)n[i]=r;return n},kn=ot(Mn,[["__scopeId","data-v-f66aacda"]]),Cn=["width","height","viewBox"],Nn={class:"links"},An={class:"nodes"},$n=["r","cx","cy","onMouseenter","onMouseleave","onMousedown","onTouchstart"],zn=gt({__name:"index",setup(t){const e=D(),{width:n,height:i}=Tt(e),r=It(),s=D(null),u=D(null),o=D(null),l=vt(nt.insight.nodes),v=R(()=>nt.insight.edges),g=Kt(v.value).id(p=>p.uid).distance(100),d=vn(l).force("link",g).force("charge",gn().strength(-200)).force("x",yn().strength(.05)).force("y",xn().strength(.05)).stop();Mt(()=>nt.insight,p=>{if(p){l.slice().forEach((w,C)=>{p.nodes.find(L=>L.uid===w.uid)||l.splice(C,1)});for(const w of p.nodes){const C=l.find(M=>M.uid===w.uid);C?Object.assign(C,w):l.push(w)}d.nodes(l),g.links(p.edges),d.alpha(.3).restart()}});const _=1e3,c=.001;kt(()=>{d.alpha(1).alphaMin(c).alphaDecay(1-Math.pow(c,1/_)).restart()}),j("mousemove",k),j("touchmove",k),j("mouseup",x),j("touchend",x);function m(p,w){u.value=p,r.activate("\u63D2\u4EF6\uFF1A"+p.name,w)}function f(p,w){s.value!==p&&(u.value=null,r.deactivate(300))}function a(p,w){o.value=p;const M=`${p.type==="dashed"?"\u670D\u52A1":"\u8C03\u7528"}\uFF1A${p.source.name} \u2192 ${p.target.name}`;r.activate(M,w)}function h(p,w){o.value=null,r.deactivate(300)}function y(p,w){s.value=p,d.alphaTarget(.3).restart();const C=W(w);p.lastX=C.clientX,p.lastY=C.clientY,p.fx=p.x,p.fy=p.y}function k(p){const w=s.value;if(!w)return;const C=W(p);w.fx+=C.clientX-w.lastX,w.fy+=C.clientY-w.lastY,w.lastX=C.clientX,w.lastY=C.clientY}function x(p){d.alphaTarget(0);const w=s.value;w&&(w.fx=null,w.fy=null,u.value=null,s.value=null)}const N=R(()=>{if(o.value)return{nodes:new Set([o.value.source,o.value.target]),links:new Set([o.value])};if(!u.value)return{nodes:new Set,links:new Set};const p={nodes:new Set([u.value]),links:new Set};let w=true;for(;w;){w=false;for(const M of v.value)p.links.has(M)||M.type!=="solid"||p.nodes.has(M.source)&&!p.nodes.has(M.target)&&(p.nodes.add(M.target),p.links.add(M),w=true)}const C={nodes:new Set([u.value]),links:new Set};for(w=true;w;){w=false;for(const M of v.value)C.links.has(M)||M.type!=="solid"||C.nodes.has(M.target)&&!C.nodes.has(M.source)&&(C.nodes.add(M.source),C.links.add(M),w=true)}return{nodes:new Set([...p.nodes,...C.nodes]),links:new Set([...p.links,...C.links])}});return(p,w)=>{const C=Ct("k-layout");return T(),st(C,{main:"darker"},{default:at(()=>[I("div",{ref_key:"root",ref:e,class:Q({insight:true,"has-highlight":A(r).active})},[(T(),b("svg",{ref:"svg",id:"couple",width:A(n),height:A(i),viewBox:`-${A(n)/2} -${A(i)/2} ${A(n)} ${A(i)}`},[I("g",Nn,[(T(true),b(Z,null,tt(A(v),(M,L)=>(T(),st(kn,{key:L,link:M,class:Q({highlight:A(N).links.has(M)}),onMouseenter:a,onMouseleave:h},null,8,["link","class"]))),128))]),I("g",An,[(T(true),b(Z,null,tt(l,(M,L)=>(T(),b("g",{class:Q(["node",{highlight:A(N).nodes.has(M)}]),key:L},[I("circle",{r:u.value===M?12:9,cx:M.x,cy:M.y,onMouseenter:Y(X=>m(M,X),["stop","prevent"]),onMouseleave:Y(X=>f(M),["stop","prevent"]),onMousedown:Y(X=>y(M,X),["stop","prevent"]),onTouchstart:Y(X=>y(M,X),["stop","prevent"])},null,40,$n)],2))),128))])],8,Cn)),Nt(At,{name:"fade"},{default:at(()=>[$t(I("div",{class:"tooltip",style:zt(A(r).style)},[(T(true),b(Z,null,tt(A(r).content.split(`
`),(M,L)=>(T(),b("div",{key:L},Lt(M),1))),128))],4),[[Et,A(r).active]])]),_:1})],2)]),_:1})}}});const Ln=ot(zn,[["__scopeId","data-v-d4151be1"]]),En={},Sn={class:"k-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512"},Tn=I("path",{fill:"currentColor",d:"M160 64C160 28.65 188.7 0 224 0C259.3 0 288 28.65 288 64C288 83.36 279.4 100.7 265.8 112.5L304.3 196.5C314.4 193.6 325 192 336 192C367.7 192 396.2 205.1 416.6 226.2L517.4 153.7C513.9 145.8 512 137.1 512 128C512 92.65 540.7 64 576 64C611.3 64 640 92.65 640 128C640 163.3 611.3 192 576 192C561.4 192 547.9 187.1 537.2 178.9L435.3 252.2C443.4 267.7 448 285.3 448 304C448 319.4 444.9 334 439.3 347.3L531.1 402.4C542.6 391 558.5 384 576 384C611.3 384 640 412.7 640 448C640 483.3 611.3 512 576 512C540.7 512 512 483.3 512 448C512 441.7 512.9 435.6 514.6 429.8L422.8 374.8C402.3 399.9 371 416 336 416C279.6 416 232.9 374.3 225.1 320H125.1C118.9 347.6 93.82 368 64 368C28.65 368 0 339.3 0 304C0 268.7 28.65 240 64 240C93.82 240 118.9 260.4 125.1 288H225.1C229.8 255.3 248.7 227.1 275.3 209.9L237.1 126.7C232.9 127.5 228.5 128 224 128C188.7 128 160 99.35 160 64V64zM224 96C241.7 96 256 81.67 256 64C256 46.33 241.7 32 224 32C206.3 32 192 46.33 192 64C192 81.67 206.3 96 224 96zM576 160C593.7 160 608 145.7 608 128C608 110.3 593.7 96 576 96C558.3 96 544 110.3 544 128C544 145.7 558.3 160 576 160zM576 416C558.3 416 544 430.3 544 448C544 465.7 558.3 480 576 480C593.7 480 608 465.7 608 448C608 430.3 593.7 416 576 416zM64 336C81.67 336 96 321.7 96 304C96 286.3 81.67 272 64 272C46.33 272 32 286.3 32 304C32 321.7 46.33 336 64 336zM336 384C380.2 384 416 348.2 416 304C416 259.8 380.2 224 336 224C291.8 224 256 259.8 256 304C256 348.2 291.8 384 336 384z"},null,-1),In=[Tn];function Dn(t,e){return T(),b("svg",Sn,In)}const bn=ot(En,[["render",Dn]]);St.register("activity:network",bn);const jn=t=>{t.page({path:"/graph",name:"\u4F9D\u8D56\u56FE",icon:"activity:network",order:600,fields:["insight"],component:Ln})};export{jn as default};
